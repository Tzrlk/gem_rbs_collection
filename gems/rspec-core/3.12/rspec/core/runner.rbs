module RSpec
  module Core
    # Provides the main entry point to run a suite of RSpec examples.
    class Runner
      self.@installed_at_exit: untyped

      self.@autorun_disabled: untyped

      @options: untyped

      @configuration: untyped

      @world: untyped

      # @attr_reader
      # @private
      attr_reader options: untyped

      # @attr_reader
      # @private
      attr_reader configuration: untyped

      # @attr_reader
      # @private
      attr_reader world: untyped

      # Register an `at_exit` hook that runs the suite when the process exits.
      #
      # @note This is not generally needed. The `rspec` command takes care
      #       of running examples for you without involving an `at_exit`
      #       hook. This is only needed if you are running specs using
      #       the `ruby` command, and even then, the normal way to invoke
      #       this is by requiring `rspec/autorun`.
      def self.autorun: () -> (nil | untyped)

      # @private
      def self.perform_at_exit: () -> (nil | untyped)

      # Runs the suite of specs and exits the process with an appropriate exit
      # code.
      def self.invoke: () -> untyped

      # Run a suite of RSpec examples. Does not exit.
      #
      # This is used internally by RSpec to run a suite, but is available
      # for use by any other automation tool.
      #
      # If you want to run this multiple times in the same process, and you
      # want files like `spec_helper.rb` to be reloaded, be sure to load `load`
      # instead of `require`.
      #
      # @param args [Array] command-line-supported arguments
      # @param err [IO] error stream
      # @param out [IO] output stream
      # @return [Fixnum] exit status code. 0 if all specs passed,
      #   or the configured failure exit code (1 by default) if specs
      #   failed.
      def self.run: (untyped args, ?untyped err, ?untyped out) -> untyped

      def initialize: (untyped options, ?untyped configuration, ?untyped world) -> void

      # Configures and runs a spec suite.
      #
      # @param err [IO] error stream
      # @param out [IO] output stream
      def run: (untyped err, untyped out) -> untyped

      # Wires together the various configuration objects and state holders.
      #
      # @param err [IO] error stream
      # @param out [IO] output stream
      def setup: (untyped err, untyped out) -> untyped

      # Runs the provided example groups.
      #
      # @param example_groups [Array<RSpec::Core::ExampleGroup>] groups to run
      # @return [Fixnum] exit status code. 0 if all specs passed,
      #   or the configured failure exit code (1 by default) if specs
      #   failed.
      def run_specs: (untyped example_groups) -> untyped

      # @private
      def configure: (untyped err, untyped out) -> untyped

      # @private
      def self.disable_autorun!: () -> untyped

      # @private
      def self.autorun_disabled?: () -> untyped

      # @private
      def self.installed_at_exit?: () -> untyped

      # @private
      def self.running_in_drb?: () -> (false | untyped)

      # @private
      def self.trap_interrupt: () -> untyped

      # @private
      def self.handle_interrupt: () -> untyped

      # @private
      def exit_code: (?bool examples_passed) -> (untyped | 0)

      private

      def persist_example_statuses: () -> untyped
    end
  end
end
